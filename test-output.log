
Running 3 tests using 1 worker


🚀 STARTING CRITICAL TEST: Questionnaire Infinite Rerender Fix
======================================================================

📍 TEST 1: Loading questionnaire page...
   ✓ Page navigation complete
   ✓ Waited 3 seconds for stabilization
   ✓ Page title visible
   ✅ No React infinite rerender errors
   ✅ No React state update warnings
   📊 Total requests after load: 17

📍 TEST 2: Testing form interactions...
   ✓ Navigated to section 1
   📊 Navigation triggered 10 requests
  ✘  1 [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:12:7 › Questionnaire - Final Verification › CRITICAL: Questionnaire loads and works without infinite rerenders (6.4s)

🔥 STRESS TEST: Rapid consecutive interactions
   Starting rapid interaction test...
   📊 Requests during 10 rapid interactions: 7
   ✅ Handled rapid interactions without excessive rerenders!
  ✓  2 [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:239:7 › Questionnaire - Final Verification › STRESS TEST: Rapid consecutive interactions (4.8s)

💾 PERSISTENCE TEST: Data survives navigation
   ✓ Filled date: 2023-08-20
[2m[WebServer] [22m [33m[1m⚠[22m[39m Fast Refresh had to perform a full reload due to a runtime error.
   ✓ Navigated forward
  ✘  3 [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:280:7 › Questionnaire - Final Verification › PERSISTENCE TEST: Data survives navigation (1.0m)


  1) [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:12:7 › Questionnaire - Final Verification › CRITICAL: Questionnaire loads and works without infinite rerenders 

    Error: [2mexpect([22m[31mreceived[39m[2m).[22mtoBeLessThan[2m([22m[32mexpected[39m[2m)[22m

    Expected: < [32m5[39m
    Received:   [31m10[39m

       97 |       
       98 |       // Should not trigger excessive requests
    >  99 |       expect(navigationRequests).toBeLessThan(5);
          |                                  ^
      100 |       console.log("   ✅ Navigation request count is normal");
      101 |     } else {
      102 |       console.log("   ⏭️  Already on section 1 or navigation not needed");
        at /workspace/tests/e2e/questionnaire-works.spec.ts:99:34

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/questionnaire-works-Questi-65343--without-infinite-rerenders-desktop-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/questionnaire-works-Questi-65343--without-infinite-rerenders-desktop-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/questionnaire-works-Questi-65343--without-infinite-rerenders-desktop-chromium/error-context.md

  2) [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:280:7 › Questionnaire - Final Verification › PERSISTENCE TEST: Data survives navigation 

    [31mTest timeout of 60000ms exceeded.[39m

    Error: locator.click: Test timeout of 60000ms exceeded.
    Call log:
    [2m  - waiting for locator('button').filter({ hasText: /précédent|previous/i }).first()[22m
    [2m    - locator resolved to <button disabled class="justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 border border-input bg-background hover:bg-accent hover:text-accent-foreground h-12 md:h-10 px-4 py-2 flex items-center gap-2">…</button>[22m
    [2m  - attempting click action[22m
    [2m    2 × waiting for element to be visible, enabled and stable[22m
    [2m      - element is not enabled[22m
    [2m    - retrying click action[22m
    [2m    - waiting 20ms[22m
    [2m    2 × waiting for element to be visible, enabled and stable[22m
    [2m      - element is not enabled[22m
    [2m    - retrying click action[22m
    [2m      - waiting 100ms[22m
    [2m    109 × waiting for element to be visible, enabled and stable[22m
    [2m        - element is not enabled[22m
    [2m      - retrying click action[22m
    [2m        - waiting 500ms[22m


      312 |       const prevBtn = page.locator('button').filter({ hasText: /précédent|previous/i }).first();
      313 |       if (await prevBtn.isVisible({ timeout: 2000 }).catch(() => false)) {
    > 314 |         await prevBtn.click();
          |                       ^
      315 |         await page.waitForTimeout(500);
      316 |         console.log("   ✓ Navigated back");
      317 |       }
        at /workspace/tests/e2e/questionnaire-works.spec.ts:314:23

    attachment #1: screenshot (image/png) ──────────────────────────────────────────────────────────
    test-results/questionnaire-works-Questi-59d9a-ST-Data-survives-navigation-desktop-chromium/test-failed-1.png
    ────────────────────────────────────────────────────────────────────────────────────────────────

    attachment #2: video (video/webm) ──────────────────────────────────────────────────────────────
    test-results/questionnaire-works-Questi-59d9a-ST-Data-survives-navigation-desktop-chromium/video.webm
    ────────────────────────────────────────────────────────────────────────────────────────────────

    Error Context: test-results/questionnaire-works-Questi-59d9a-ST-Data-survives-navigation-desktop-chromium/error-context.md

  2 failed
    [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:12:7 › Questionnaire - Final Verification › CRITICAL: Questionnaire loads and works without infinite rerenders 
    [desktop-chromium] › tests/e2e/questionnaire-works.spec.ts:280:7 › Questionnaire - Final Verification › PERSISTENCE TEST: Data survives navigation 
  1 passed (1.3m)
